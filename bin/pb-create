#!/usr/bin/env node

const program = require('commander')
const mkdirpSync = require('fs-extra').mkdirpSync
const existsSync = require('fs').existsSync
const join = require('path').join

const { existTip } = require('../lib/prompt')

program
    .usage('[options]')
    .option('--no-install', 'Disable npm install after files created')
    .option('-t, --target <source>', 'boilerplate source, default vue')
    .parse(process.argv)

if (!program.args[0]) {
    program.help()
} else {
    const dest = join(process.cwd(), program.args[0])
    if (existsSync(dest)) {
        existTip()
    }
    mkdirpSync(dest)
    process.chdir(dest)
    require('../lib/init').default(program)
}
